<FMPhone>:
    orientation: "vertical"
    spacing: dp(0) if not root.show_country_code else dp(2)
    size_hint_y: None
    height: dp(56)

    BoxLayout:
        orientation: "horizontal"
        size_hint_y: None
        height: dp(56)

        # Country code field or empty space
        BoxLayout:
            size_hint_x: 0.25 if root.show_country_code else 0
            width: 0 if not root.show_country_code else self.minimum_width
            padding: [0,0,0,0] if not root.show_country_code else [0,0,dp(8),0]

            FMTextField:
                id: country_code
                text: root.default_code
                hint_text: "Country"
                readonly: True
                on_focus: if self.focus: root.show_country_menu()
                disabled: not root.show_country_code
                opacity: 1 if root.show_country_code else 0
                on_text: root.clear_errors()

        # Phone number field always visible
        FMTextField:
            id: number 
            hint_text: root.label
            size_hint_x: 1 if not root.show_country_code else 0.75
            mask: "(###) ###-####"
            on_text: root.clear_errors()

    MDLabel:
        id: phone_error
        font_size: "12sp"
        text: ""
        padding: [dp(12), dp(18), dp(12), dp(0)]
        theme_text_color: "Custom"